Section 23.3

O

2

> .&

Exercises 623

The 1log1p function exists for a similar reason. For values of x that are close
to zero, log1p (x) should be more accurate than log (1 + x).

Why is the function that computes the gamma function named tgamma
instead of just gamma? [p. 606]

Àt the time the C99 standard was being written, some compilers provided a func-
tion named gamma, but 1t computed the log of the gamma function. This function
was later renamed 1gamma. Choosing the name gamma for the gamma function
would have conflicted with existing practice, so the C99 committee decided on the
name tgamma (‘‘true gamma”) instead.

Why does the description of the nextafter function say that if x and y are
equal, nextafter returns y? If x and y are equal, what*s the difference
between returning x or y? [p. 609]

Consider the call nextafter(-0.0, +0.0). in which the arguments are
mathematically equal. By returning y instead of x, the function has a return value
of +0.0 (rather than —0.0, which would be counterintuitive). Similarly, the call
nextafter(+0.0, -O.0}) returns —0.0.

Why does <string.h> provide so many ways to do the same thing? Do we
really need four copying functions (memcpy, memmove, strcopy, and
strncpy)? [p. 616]

Let’s start with memcpy and stropy. These functions are used for different pur-
poses. stropy will only copy a character array that’s terminated with a null char-
acter (a string, in other words); memcpy can copy a memory block that lacks such
a terminator (an array of integers, for example).

The other functions allow us to choose between safety and performance.
strncpy 1s safer than strcopy, since it limits the number of characters that can be
copied. We pay a price for safety, however, since strncopy is likely to be slower
than strepy. Using memmove involves a similar trade-off. memmove will copy
bytes from one region of memory into a possibly overlapping region. memcpy isn’t
guaranteed to work properly in this situation; however, 1f we can guarantee no over-
lap, memcpy is likely to be faster than memmove.

Why does the strspn function have such an odd name? [p. 620]

Instead of thinking of strspn’s return value as the index of the first character
that’s not in à specified set, we could think of it as the length of the longest “span”
of characters that are in the set.

Exercises

Extend the round_nearest function so that it rounds a floating-point number x to n dig-
its after the decimal point. For example, the call round_nearest (3.14159, 3) would
