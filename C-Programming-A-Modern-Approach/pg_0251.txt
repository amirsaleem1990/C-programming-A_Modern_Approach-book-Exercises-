226

Chapter 10  Program Organization

time function »26.3
srand function »26.2

rand function »26.2

guess2.c

print£ ("Too low; try again.\n") ;
else
printf("Too high; try again.\n") ;

For random number generation, the quess. c program rclies on the time,
srand, and rand functions, which we first used in deal .c (Section 8.2). This
time, we're scaling the return value of rand so that it falls between 1 and
MAX NUMBER.

Althoueh guess.c works fine, it relies on an external variable. We made
secret _number external so that both choose _new secret _number and
read_guesses could access it. If we alter choose _ new secret _number
and read_quesses just à little, we should be able to move secret _number
into the main function. We'll modify choose new secret number so
that it returns the new number, and we'll rewriteé read _guesses so that
secret _number can be passed to it as an argument.

Here’s our new program, with changes in bold:

/* Asks user to quess a hidden number */

#include <stdio.h>
#include <stdlib.h>
#Hinclude <time.h>

#define MAX NUMBER 100

/* prototypes */

void initialize number generator (void) ;
int new secret _number (void) ;

void read guesses (int secret number) ;

int main (void)
char command ;
int secret number;

printf ("Guess the secret number between 1 and %$d.\n\n",
MAX _ NUMBER) ;
initialize _number generator () ;
do {
secret number = new secret number () ;
print£f ("A new number has been chosen.\n") ;
read guesses (secret number) ;
printf ("Play again? (Y/N) ");

scan£(" %c", &command) ;
print£ ("\n") ;
} while (command == 'y' || command == 'Y');

return 0;

}
