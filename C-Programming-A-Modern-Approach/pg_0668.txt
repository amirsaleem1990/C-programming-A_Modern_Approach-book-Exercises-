setlocale

getenv lunction »26.2

25.1  The <1ocale.h> Header: Localization 643

The setlocale Function

char *setlocale(int category, const char *locale) ;

The setlocale function changes the current locale, either for a single category
or for all categories. If the first argument is one of the macros LC COLLATE,
LC CTYPE, LC MONETARY, LC NUMERIC, or LC TIME, a call of set-
locale affects only a single category. If the first argument is LC_ALL, the call
affects all categories. The C standard defines only two values for the second argu-
ment: "C" and " ", Other locales, if any, depend on the implementation.

At the beginning of program execution, the call

setlocale(LC ALL, "C") ;

occurs behind the scenes. In the "C" locale, library functions behave in the “nor-
mal” way, and the decimal point 1s à period.

Changing locale after the program has begun execution requires an explicit
call of setlocale. Calling setlocale with "" as the second argument
switches to the native locale, allowing the program to adapt its behavior to the
local environment. The C standard doesn’t define the exact effect of switching to
the native locale. Some implementations of setlocale check the execution
environment (in the same way as getenv) for an environment variable with a par-
ticular name (perhaps the same as the category macro). Other implementations
don’t do anything at all. (The standard doesn’t require setlocale to have any
effect. Of course, à library whose version of setlocale does nothing isn’t likely
to sell too well in some parts of the world.)

 

 

Locales

Locales other than "C" and "" vary from one compiler to another. The GNU C
library, known as glibc, provides a "POSIX" locale, which is the same as the "c"
locale. glibe, which is used by Linux, allows additional locales to be installed if
desired. These locales have the form

language [ _territory] [. codeset] [ @modifier]

where each bracketed item is optional. Possible values for /anguage are listed in a
standard known as ISO 639, territory comes from another standard (|ISO 3166), and
codeset specifies a character set or an encoding of a character set. Here are a few
examples:

"swedish"

"en GB" (English — United Kingdom)
"en IE" (English — Ireland)

"fr CH" (French — Switzerland)

There are several variations on the "en IE" locale, including "en_IE@euro" (using
the euro currency), "en IE.iso88591" (using the ISO//EC 8859-1 character set),
